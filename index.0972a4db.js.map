{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAGA,MAEMC,EAAQ,CACZC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,YAChCE,QAASH,SAASC,cAAc,aAclC,SAASG,EAAKC,GACZC,EAAWD,GAGbE,eAAeC,EAAaC,GAC1BA,EAAMC,iBAEN,MAAMC,EAAQb,EAAMC,KAAKa,YAAYC,MAErC,GAAc,KAAVF,EACFb,EAAMK,QAAQW,UAAUC,OAAO,uBAC1B,CACLjB,EAAMK,QAAQW,UAAUE,IAAI,mBAE5B,MAAMC,EAAc,4FAAsEN,YAC1F,EAAAf,EAAAsB,SAAiBD,EAAaX,GAGhCR,EAAMC,KAAKoB,QAGb,SAASb,EAAWD,GACmB,IAAjCA,EAASe,KAAKC,QAAQC,OACxBxB,EAAMK,QAAQW,UAAUC,OAAO,oBAE/BjB,EAAMK,QAAQW,UAAUE,IAAI,mBAG5BlB,EAAMI,QAAQqB,UAAY,IAC1B,EAAAC,EAAAN,SAAwBb,IA/B5BP,EAAMC,KAAK0B,iBAAiB,SAAUjB,GAJpCkB,OAAOD,iBAAiB,mBAAoBrB,GAC5CN,EAAMC,KAAK0B,iBAAiB,SAAUjB","sources":["src/js/searchMovies.js"],"sourcesContent":["import fetchFromBackend from './fetchAPI';\nimport renderMoviesCardsMarkup from './fetchMovies';\n\nconst API_KEY = '641afe219016a353adafbc0b4f44c0fe';\n\nconst $refs = {\n  form: document.querySelector('.header-form'),\n  gallery: document.querySelector('.gallery'),\n  message: document.querySelector('#message'),\n};\n\n// const $form = document.querySelector('.header-form');\n// const $gallery = document.querySelector('.gallery');\n// const $message = document.querySelector('#message');\n\nconst eventHandlers = () => {\n  window.addEventListener('DOMContentLoaded', init);\n  $refs.form.addEventListener('submit', onShowMovies);\n};\n\n$refs.form.addEventListener('submit', onShowMovies);\n\nfunction init(response) {\n  loadMovies(response);\n}\n\nasync function onShowMovies(event) {\n  event.preventDefault();\n\n  const query = $refs.form.searchMovie.value;\n\n  if (query === '') {\n    $refs.message.classList.remove('visually-hidden');\n  } else {\n    $refs.message.classList.add('visually-hidden');\n\n    const fetchMovies = `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${query}&page=1`;\n    fetchFromBackend(fetchMovies, loadMovies);\n  }\n\n  $refs.form.reset();\n}\n\nfunction loadMovies(response) {\n  if (response.data.results.length === 0) {\n    $refs.message.classList.remove('visually-hidden');\n  } else {\n    $refs.message.classList.add('visually-hidden');\n\n    // renderMovieCard(response);\n    $refs.gallery.innerText = '';\n    renderMoviesCardsMarkup(response);\n  }\n}\n\n// function renderMovieCard(obj) {\n//   const result = obj.data.results;\n//   const markup = result\n//     .map(({ id, poster_path, genre_ids, original_title, release_date }) => {\n//       return `<article class=\"card\" data-id=\"${id}\">\n//                 <img class=\"card__image\" loading=\"lazy\"\n//                 src=\"https://image.tmdb.org/t/p/w500${poster_path}\"\n//                 alt=\"${original_title} movie poster\"/>\n\n//                 <p class=\"card__title\">${original_title}</p>\n//                 <p class=\"card__genres\">${genre_ids} |\n//                 <span class=\"card__year\">${release_date.split('-')[0]}</span>\n//                 </p>\n//             </article>`;\n//     })\n//     .join('');\n\n//   $refs.gallery.innerText = '';\n//   $refs.gallery.insertAdjacentHTML('beforeend', markup);\n// }\n\n// eventHandlers();\n\neventHandlers();\n"],"names":["$cqGDw","parcelRequire","$4a9ea052b238628e$var$$refs","form","document","querySelector","gallery","message","$4a9ea052b238628e$var$init","response","$4a9ea052b238628e$var$loadMovies","async","$4a9ea052b238628e$var$onShowMovies","event","preventDefault","query","searchMovie","value","classList","remove","add","fetchMovies","default","reset","data","results","length","innerText","$1TPJ0","addEventListener","window"],"version":3,"file":"index.0972a4db.js.map"}