{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCAGMC,EAAU,mCAEVC,EAAQ,CACZC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,YAChCE,QAASH,SAASC,cAAc,aAclC,SAASG,EAAKC,GACZC,EAAWD,G,SAGEE,EAAaC,G,OAAbC,EAAYC,MAAAC,KAAAC,W,SAAZH,I,OAAAA,EAAfI,EAAAlB,EAAA,CAAAkB,EAAAC,GAAAC,MAAA,SAAAC,EAA4BR,G,IAGpBS,EAOEC,E,kEATRV,EAAMW,iBAIQ,MAFRF,EAAQnB,EAAMC,KAAKqB,YAAYC,OAGnCvB,EAAMK,QAAQmB,UAAUC,OAAO,oBAE/BzB,EAAMK,QAAQmB,UAAUE,IAAI,mBAEtBN,EAAc,qDAAsEO,OAAjB5B,EAAQ,WAAe4B,OAANR,EAAM,YAChG,EAAAS,EAAAC,SAAiBT,EAAaZ,IAGhCR,EAAMC,KAAK6B,Q,4CAdclB,MAAAC,KAAAC,WAiB3B,SAASN,EAAWD,GACmB,IAAjCA,EAASwB,KAAKC,QAAQC,OACxBjC,EAAMK,QAAQmB,UAAUC,OAAO,oBAE/BzB,EAAMK,QAAQmB,UAAUE,IAAI,mBAG5B1B,EAAMI,QAAQ8B,UAAY,IAC1B,EAAAC,EAAAN,SAAwBtB,IA/B5BP,EAAMC,KAAKmC,iBAAiB,SAAU3B,GAJpC4B,OAAOD,iBAAiB,mBAAoB9B,GAC5CN,EAAMC,KAAKmC,iBAAiB,SAAU3B,G","sources":["src/js/searchMovies.js"],"sourcesContent":["import fetchFromBackend from './fetchAPI';\nimport renderMoviesCardsMarkup from './fetchMovies';\n\nconst API_KEY = '641afe219016a353adafbc0b4f44c0fe';\n\nconst $refs = {\n  form: document.querySelector('.header-form'),\n  gallery: document.querySelector('.gallery'),\n  message: document.querySelector('#message'),\n};\n\n// const $form = document.querySelector('.header-form');\n// const $gallery = document.querySelector('.gallery');\n// const $message = document.querySelector('#message');\n\nconst eventHandlers = () => {\n  window.addEventListener('DOMContentLoaded', init);\n  $refs.form.addEventListener('submit', onShowMovies);\n};\n\n$refs.form.addEventListener('submit', onShowMovies);\n\nfunction init(response) {\n  loadMovies(response);\n}\n\nasync function onShowMovies(event) {\n  event.preventDefault();\n\n  const query = $refs.form.searchMovie.value;\n\n  if (query === '') {\n    $refs.message.classList.remove('visually-hidden');\n  } else {\n    $refs.message.classList.add('visually-hidden');\n\n    const fetchMovies = `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${query}&page=1`;\n    fetchFromBackend(fetchMovies, loadMovies);\n  }\n\n  $refs.form.reset();\n}\n\nfunction loadMovies(response) {\n  if (response.data.results.length === 0) {\n    $refs.message.classList.remove('visually-hidden');\n  } else {\n    $refs.message.classList.add('visually-hidden');\n\n    // renderMovieCard(response);\n    $refs.gallery.innerText = '';\n    renderMoviesCardsMarkup(response);\n  }\n}\n\n// function renderMovieCard(obj) {\n//   const result = obj.data.results;\n//   const markup = result\n//     .map(({ id, poster_path, genre_ids, original_title, release_date }) => {\n//       return `<article class=\"card\" data-id=\"${id}\">\n//                 <img class=\"card__image\" loading=\"lazy\"\n//                 src=\"https://image.tmdb.org/t/p/w500${poster_path}\"\n//                 alt=\"${original_title} movie poster\"/>\n\n//                 <p class=\"card__title\">${original_title}</p>\n//                 <p class=\"card__genres\">${genre_ids} |\n//                 <span class=\"card__year\">${release_date.split('-')[0]}</span>\n//                 </p>\n//             </article>`;\n//     })\n//     .join('');\n\n//   $refs.gallery.innerText = '';\n//   $refs.gallery.insertAdjacentHTML('beforeend', markup);\n// }\n\n// eventHandlers();\n\neventHandlers();\n"],"names":["$bpxeT","parcelRequire","$e1a441075edf8b92$var$API_KEY","$e1a441075edf8b92$var$$refs","form","document","querySelector","gallery","message","$e1a441075edf8b92$var$init","response","$e1a441075edf8b92$var$loadMovies","$e1a441075edf8b92$var$onShowMovies","event","$e1a441075edf8b92$var$_onShowMovies","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","query","fetchMovies","preventDefault","searchMovie","value","classList","remove","add","concat","$lbRHt","default","reset","data","results","length","innerText","$kitKc","addEventListener","window"],"version":3,"file":"index.b2691ff9.js.map"}